<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <!-- For Bootstarp -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <style>

        /*For Admin Pannel Page*/
        .mainDivivionOfAdminPannel{
            width: 430px;
            height: 100%;
            margin-top: 30px;
            margin-left: 10px;
            border: solid 3px black;
            border-radius: 5px;
            background-color: #f2f2f2;
            padding: 20px;

        }

        .newTaskCreateLbl{
            font-size: 30px;
            justify-content: center;
            align-items: center;
            display: flex;
            padding-bottom: 40px;
            margin-top: 10px;
        }


        input[type=text], select, textarea{
            width: 100%;
            padding: 12px;
            border: 1px solid rgb(147, 143, 143);
            border-radius: 4px;
            box-sizing: border-box;
            margin-top: 6px;
            margin-bottom: 16px;
            resize: vertical;
            outline: none;
            background-color: #FFF;
            font-family:Arial, Helvetica, sans-serif;
          }
          
          input[type=button] {
            width: 40%;
            background-color: #3ba53e;
            color: white;
            padding: 14px 20px;
            margin: 30px 0;
            margin-left: 90px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 20px;
            border-radius: 30px;
          }
          
          input[type=button]:hover {
            background-color: #0e6e13;
            
          }
          
          #startDate, #endDate{
            margin-left: 20px;
            width: 45%;
            height: 20px;
            font-size: 15px;
            border-radius: 4px;
            border: 1px solid rgb(147, 143, 143);
            padding: 12px;
            margin-top: 6px;
            margin-bottom: 16px;
            background-color: #FFF;
            
          }


          


          /* For diplaying available tasks  */
          .displaySavedTasks{
           
            position: absolute;
            width: 900px;
            height: 400px;
            float: right;
            border: solid 3px black;
            margin-top: -695px;
            margin-left: 500px;
            overflow: auto;
            margin-bottom: 10px;
           
          }

          .currentTasksLable{
            font-size: 30px;
            justify-content: center;
            align-items: center;
            display: flex;
            padding-bottom: 40px;
            margin-top: 10px;
          }

          .toDoClassLable{
            font-size: 20px;
            float: left;
            padding-bottom: 5px;
            margin-top: 10px;
            margin-left: 70px;
            margin-bottom: 5px;
          }

          .toDoingClassLable{
            font-size: 20px;
            float: left;
            display: flex;
            padding-bottom: 5px;
            margin-top: 10px;
            margin-left: 210px;
          }

          .toDoneClassLable{
            font-size: 20px;
            float: left;
            display: flex;
            padding-bottom: 5px;
            margin-top: 10px;
            margin-left: 210px;
          }


          .toDoTasks{
            width: 270px;
            height: 250px;
            margin-top: 5px;
            margin-left: 15px;
            border: solid 2px black;
            font-size: 18px;
            padding-left: 10px;
            overflow: auto;
            background-color: rgb(124, 120, 120);
            color: #FFF;
            float: left;
           
          }

          .toDoingTasks{
            width: 270px;
            height: 250px;
            margin-top: 5px;
            margin-left: 10px;
            border: solid 2px black;
            font-size: 18px;
            padding-left: 10px;
            overflow: auto;
            float: left;
            background-color: rgb(124, 120, 120);
            color: #FFF;
          }

          .toDoneTasks{
            width: 270px;
            height: 250px;
            margin-left: 10px;
            margin-top: 5px;
            border: solid 2px black;
            font-size: 18px;
            padding-left: 10px;
            overflow: auto;
            background-color: rgb(124, 120, 120);
            color: #FFF;
            float: left;  
          }




    </style>
</head>
<body>


  <!-- For displaying create a new task -->
    <div class = "mainDivivionOfAdminPannel">

      <label class="newTaskCreateLbl">Create a new task</label> 
 
      <form action="" id="taskCreatingForm">

          <label for="taskid">Task Id</label>
          <input type="text" id="taskId" placeholder="Please enter task id">
      
          <label for="taskname">Task Name</label>
          <input type="text" id="taskName"  placeholder="Please enter a name for this task">

          <label for="taskdetails">Task Details</label>
          <textarea id="taskDetails"  placeholder="Enter details of the class" style="height:80px"></textarea>
      
          <label for="startdate">Select Start date</label>
          <input type="date" id="startDate">
          <br/>

          <label for="enddate">Select End date</label>
          <input type="date" id="endDate">

          <input type="button" value="Create" id = "insertDataBtn">

        
        
             
      </form>
        
    </div>


<!-- For Displaying Current tasks -->

       

      <div class = "displaySavedTasks"  id = "databaseDisplayer">
       
        <label class="currentTasksLable">Current Tasks</label> 

          <div class="container mt-3">
            <table class="table">
              <thead>
                <th>Number</th>
                <th>Task Id</th>
                <th>Task Name</th>
                <th>Task Start Dtae</th>
                <th>Task End Date</th> 
              </thead>
              <tbody id = "tbody1"></tbody>
            </table>
          </div>
       
      </div>




        <!-- <label class="toDoClassLable">To Do tasks</label> 
        <label class="toDoingClassLable">To Doing tasks</label> 
        <label class="toDoneClassLable">To Done tasks</label> -->

      <!-- <div class="toDoTasks" id="toDoTasks">
              <p id="toDoTaskId"> Task Id : 001 </p>
              <p id="toDoTaskName"> Task Name : Create login page loginp padlsmlk kfkf</p>
              <p id="toDoTaskAssignedTo"> Task Assign to : abc@gmail.com </p>
              <p id="toDoTaskEndDate"> Task End date : 2023-06-04 </p>
          </div>
  
         

          <div class="toDoingTasks">
            <p id="toDoTaskId"> Task Id : 001 </p>
            <p id="toDoTaskName"> Task Name : Create login page loginp padlsmlk kfkf</p>
            <p id="toDoTaskAssignedTo"> Task Assign to : abc@gmail.com </p>
            <p id="toDoTaskEndDate"> Task End date : 2023-06-04 </p>
            <br>
            <br>

            
        </div>
  
        
        <div class="toDoneTasks">
          <p id="toDoTaskId"> Task Id : 001 </p>
          <p id="toDoTaskName"> Task Name : Create login page loginp padlsmlk kfkf</p>
          <p id="toDoTaskAssignedTo"> Task Assign to : abc@gmail.com </p>
          <p id="toDoTaskEndDate"> Task End date : 2023-06-04 </p>
        </div> -->


<script src="https://kit.fontawesome.com/68726d9447.js" crossorigin="anonymous"></script>

    <script type="module">


       import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
       import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-analytics.js";
      


      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyD5JiYR8U0fZ3SH-aE3bs_azy_tVGCF1fk",
        authDomain: "java-script-project-fe70e.firebaseapp.com",
        databaseURL: "https://java-script-project-fe70e-default-rtdb.firebaseio.com",
        projectId: "java-script-project-fe70e",
        storageBucket: "java-script-project-fe70e.appspot.com",
        messagingSenderId: "333637297039",
        appId: "1:333637297039:web:e1e4e9053f3ef7003461fa",
        measurementId: "G-1791Q3L03T"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);

      import {getDatabase, ref, set, child, get} from "https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js";

      //declarring database variable  
      const database = getDatabase(); 

        //Declaring varaiable that are connected with adminPanel.html file
        let taskId = document.getElementById("taskId");
        let taskName = document.getElementById("taskName");
        let taskDetails = document.getElementById("taskDetails");
        let taskStartDate = document.getElementById("startDate");
        let taskEndDate = document.getElementById("endDate");
        let insertDataButton = document.getElementById("insertDataBtn"); 


          //For Admin pannel, creating new task
          function crteateNewTask(){

              set(ref(database, "Tasks/" + taskId.value), {
                  Task_Id : taskId.value,
                  Task_Name : taskName.value,
                  Task_Details : taskDetails.value,
                  Task_Start_Date : taskStartDate.value,
                  Task_End_Date : taskEndDate.value

              })
              .then(()=>{
                  alert("Given data successfully added into the database");
              })
              .catch((error)=>{
                  alert(error);
              });

              getAllData();

          }

         insertDataButton.addEventListener('click', crteateNewTask);



        //  Fetching data from database to admin panel.

        let taskid = 0;
        let tbody = document.getElementById('tbody1');
        let loadDatabase = document.getElementById('databaseDisplayer');

        function addItemsToTable(taskId,taskName,taskStartDate,taskEndDate){
          let trow = document.createElement('tr');
          let td1 = document.createElement('td');
          let td2 = document.createElement('td');
          let td3 = document.createElement('td');
          let td4 = document.createElement('td');
          let td5 = document.createElement('td');

          td1.innerHTML = ++taskid;
          td2.innerHTML = taskId;
          td3.innerHTML = taskName;
          td4.innerHTML = taskStartDate;
          td5.innerHTML = taskEndDate;

          trow.appendChild(td1);
          trow.appendChild(td2);
          trow.appendChild(td3);
          trow.appendChild(td4);
          trow.appendChild(td5);

          tbody.appendChild(trow);
        }

        function addAllDataToTable(theTask){
          taskid = 0;
          tbody.innerHTML = "";
          theTask.forEach(element => {
            addItemsToTable(element.Task_Id,element.Task_Name,element.Task_Start_Date,element.Task_End_Date);
          });
        }

        //Getting all data from firebase
        function getAllData(){
          const databaseRef = ref(database); 

          get(child(databaseRef, "Tasks"))
          .then ((snapshot) => {
            let tasks = [];
            snapshot.forEach(childSnapshot => {
              tasks.push(childSnapshot.val());
            }); 

            addAllDataToTable(tasks);

          })
        }

       
        window.onload = getAllData;
    </script>  
  
</body>
</html>